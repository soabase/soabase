<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-02-11 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150211" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Soabase &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/soabase/soabase">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Soabase</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-02-11
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.3.0
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Soabase</li>
                              
      <li>
  
                          <a href="index.html" title="About">
          <i class="none"></i>
        About</a>
            </li>
                
      <li>
  
                          <a href="usage.html" title="Getting Started">
          <i class="none"></i>
        Getting Started</a>
            </li>
                
      <li>
  
                          <a href="soaconfig.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="example.html" title="Examples">
          <i class="none"></i>
        Examples</a>
            </li>
                              <li class="nav-header">Features</li>
                              
      <li class="active">
  
            <a href="#"><i class="none"></i>Service Discovery</a>
          </li>
                
      <li>
  
                          <a href="client.html" title="REST Client">
          <i class="none"></i>
        REST Client</a>
            </li>
                
      <li>
  
                          <a href="attributes.html" title="Dynamic Attributes">
          <i class="none"></i>
        Dynamic Attributes</a>
            </li>
                
      <li>
  
                          <a href="admin.html" title="Admin APIs">
          <i class="none"></i>
        Admin APIs</a>
            </li>
                
      <li>
  
                          <a href="console.html" title="Admin Console">
          <i class="none"></i>
        Admin Console</a>
            </li>
                
      <li>
  
                          <a href="config.html" title="Config Utils">
          <i class="none"></i>
        Config Utils</a>
            </li>
                
      <li>
  
                          <a href="guice.html" title="Guice Integration">
          <i class="none"></i>
        Guice Integration</a>
            </li>
                              <li class="nav-header">Details</li>
                              
      <li>
  
                          <a href="source-repository.html" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                
      <li>
  
                          <a href="issue-tracking.html" title="Issues">
          <i class="none"></i>
        Issues</a>
            </li>
                
      <li>
  
                          <a href="apidocs/index.html" title="JavaDoc">
          <i class="none"></i>
        JavaDoc</a>
            </li>
                
      <li>
  
                          <a href="team-list.html" title="Team">
          <i class="none"></i>
        Team</a>
            </li>
                              <li class="nav-header">Reports</li>
                              
      <li>
  
                          <a href="project-summary.html" title="Summary">
          <i class="none"></i>
        Summary</a>
            </li>
                
      <li>
  
                          <a href="dependency-management.html" title="Dependencies">
          <i class="none"></i>
        Dependencies</a>
            </li>
                
      <li>
  
                          <a href="license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                   
        
        
        
    <iframe src="http://www.facebook.com/plugins/like.php?href=https://github.com/soabase/soabase&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2><a name="Service_Discovery"></a>Service Discovery</h2>
<p>In SOA/distributed systems, services need to find each other. i.e. a web service might need to find a caching service, etc. DNS can be used for this but it is nowhere near flexible enough for services that are constantly changing. A Service Discovery system provides a mechanism for:</p>
<ul>
<li>Services to register their availability</li>
<li>Locating a single instance of a particular service</li>
<li>Notifying when the instances of a service change</li></ul>
<p>In Soabase, Service Discovery is transparent for the most part. Soabase applications automatically register themselves and the <a href="./client.html">REST Client Enhancements</a> use it to locate service instances. The default implementation uses <a class="externalLink" href="http://curator.apache.org/curator-x-discovery/index.html">Apache Curator</a>. You only need to add configuration and the bundle.</p>
<div class="section">
<h3><a name="Usage"></a>Usage</h3>
<p>Service Discovery is enabled via configuration. See the <a href="./soaconfig.html#Service_Discovery">Service Discovery Configuration</a> section for details. To use the default Apache Curator/ZooKeeper implementation, add a <tt>CuratorConfiguration</tt> field to your application's Configuration object. If needed, you can access the <tt>Discovery</tt> instance from <tt>SoaFeatures</tt>.</p></div>
<div class="section">
<h3><a name="Curator"></a>Curator</h3>
<p>A nice side-effect of using the standard Apache Curator integration is that you can directly access the CuratorFramework instance for any other ZooKeeper usage you might have. You can even create multiple CuratorFramework instances for different ZooKeeper clusters. Each Curator instance defined in your Configuration is set in SoaFeatures with the configured name.</p></div>
<div class="section">
<h3><a name="Adding_a_Custom_Implementation"></a>Adding a Custom Implementation</h3>
<p>To use something other than the Curator Service Discovery implementation, follow these steps:</p>
<ul>
<li>Create implementations for <tt>DiscoveryFactory</tt> and <tt>ExtendedDiscovery</tt></li>
<li>Add a directory named <tt>META-INF/services</tt> that contains two files: <tt>io.dropwizard.jackson.Discoverable</tt> and <tt>io.soabase.core.features.discovery.DiscoveryFactory</tt>.</li></ul>
<p><i>DiscoveryFactory</i></p>
<p>Your DiscoveryFactory implementation is like other Dropwizard factories. It should be both configuration and a factory. Use <tt>ZooKeeperDiscoveryFactory.java</tt> as an example. This class must be annotated with <tt>JsonTypeName</tt> and given a unique name. You then use this name as the value for the attributes type in your configuration file. E.g.</p>
<div class="source">
<pre>package com.me.my;

@JsonTypeName(&quot;my-discovery&quot;)
public class MyDiscoveryFactory implements DiscoveryFactory {
    public String aConfigValue;

    public int anotherConfigValue;

        ...

    @Override
    public Discovery build(Environment environment, SoaInfo soaInfo)
    {
            ...
        return new MyDiscovery(...);
    }
}</pre></div>
<p><i>ExtendedDiscovery</i></p>
<p>Your Discovery implementation does the actual work of Service Discovery. The details will depend on your implementation's needs. Note: your custom class should implement <tt>ExtendedDiscovery</tt> not <tt>Discovery</tt>. This allows your implementation to interact with the <a href="./console.html">Administration Console</a>.</p>
<p><i>ServiceLoader files</i></p>
<p>Like other Dropwizard plugins, your Service Discovery implementation needs Service Loader files. In the <tt>io.dropwizard.jackson.Discoverable</tt> file add a line containing: <tt>io.soabase.core.features.discovery.DiscoveryFactory</tt>. In the <tt>io.soabase.core.features.discovery.DiscoveryFactory</tt> file add a line the with fully-qualified path name of your class. E.g. <tt>com.me.my.MyDiscoveryFactory</tt></p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2014&#x2013;2015
                        <a href="http://soabase.github.io/">Soabase</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
