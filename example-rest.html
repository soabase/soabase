<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-02-06 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150206" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Soabase &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/soabase/soabase">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Soabase</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-02-06
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.2.0
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Soabase</li>
                              
      <li>
  
                          <a href="index.html" title="About">
          <i class="none"></i>
        About</a>
            </li>
                
      <li>
  
                          <a href="usage.html" title="Getting Started">
          <i class="none"></i>
        Getting Started</a>
            </li>
                
      <li>
  
                          <a href="soaconfig.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="example.html" title="Examples">
          <i class="none"></i>
        Examples</a>
            </li>
                              <li class="nav-header">Features</li>
                              
      <li>
  
                          <a href="discovery.html" title="Service Discovery">
          <i class="none"></i>
        Service Discovery</a>
            </li>
                
      <li>
  
                          <a href="client.html" title="REST Client">
          <i class="none"></i>
        REST Client</a>
            </li>
                
      <li>
  
                          <a href="attributes.html" title="Dynamic Attributes">
          <i class="none"></i>
        Dynamic Attributes</a>
            </li>
                
      <li>
  
                          <a href="admin.html" title="Admin APIs">
          <i class="none"></i>
        Admin APIs</a>
            </li>
                
      <li>
  
                          <a href="console.html" title="Admin Console">
          <i class="none"></i>
        Admin Console</a>
            </li>
                
      <li>
  
                          <a href="config.html" title="Config Utils">
          <i class="none"></i>
        Config Utils</a>
            </li>
                
      <li>
  
                          <a href="guice.html" title="Guice Integration">
          <i class="none"></i>
        Guice Integration</a>
            </li>
                              <li class="nav-header">Details</li>
                              
      <li>
  
                          <a href="source-repository.html" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                
      <li>
  
                          <a href="issue-tracking.html" title="Issues">
          <i class="none"></i>
        Issues</a>
            </li>
                
      <li>
  
                          <a href="apidocs/index.html" title="JavaDoc">
          <i class="none"></i>
        JavaDoc</a>
            </li>
                
      <li>
  
                          <a href="team-list.html" title="Team">
          <i class="none"></i>
        Team</a>
            </li>
                              <li class="nav-header">Reports</li>
                              
      <li>
  
                          <a href="project-summary.html" title="Summary">
          <i class="none"></i>
        Summary</a>
            </li>
                
      <li>
  
                          <a href="dependency-management.html" title="Dependencies">
          <i class="none"></i>
        Dependencies</a>
            </li>
                
      <li>
  
                          <a href="license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                   
        
        
        
    <iframe src="http://www.facebook.com/plugins/like.php?href=https://github.com/soabase/soabase&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2><a name="Examples_-_REST_clientserver_and_Discovery"></a><a href="./example.html">Examples</a> - REST client/server and Discovery</h2>
<div class="section">
<h3><a name="Running_the_example"></a>Running the example</h3>
<p>The example consists of 4 separate applications:</p>
<ul>
<li>mock-database</li>
<li>mock-zookeeper</li>
<li>goodbye</li>
<li>hello</li></ul>
<p>You will run 1 instance of mock-database and mock-zookeeper. You can run multiple versions of goodbye. For example purposes, run at least 2. Lastly, run one instance of hello.</p>
<p>From the soabase directory (assuming a *nix system):</p>
<div class="source">
<pre># Run the mock database in the background
java -jar ./target/mock-database.jar &amp;

# Run the mock zookeeper in the background
java -jar ./target/mock-zookeeper.jar &amp;

# Run 2 instances of the goodbye app in the background
java -jar ./target/goodbye.jar &amp;
java -jar ./target/goodbye.jar &amp;

# Run the hello app in the background
java -jar ./target/hello.jar &amp;
# You will see output that shows the ports for the hello app - save these</pre></div></div>
<div class="section">
<h3><a name="Performing_the_example_tasks"></a>Performing the example tasks</h3>
<div class="source">
<pre>curl http://localhost:HelloMainPort/hello</pre></div>
<p>This will make an HTTP/REST call to the Hello app. The Hello app will then use Discovery to query a Goodbye app instance. The Hello app will then return the Goodbye app's result plus its own. You will see the Hello app's instance name and service name. You will also see one of the Goodbye app's instance names. If you execute the REST call again you should see a different Goodbye app instance. The default load balancer is round robin so each REST call should cycle through all the Goodbye apps.</p>
<p>This example shows the following features:</p>
<table border="1" class="table table-striped">
<tr class="a">
<td align="center">Discovery Integration</td>
<td align="center">Soabase automatically registers services with the Sobase Discovery system.</td></tr>
<tr class="b">
<td align="center">Integrated REST Client</td>
<td align="center">Soabase wraps both the Apache HTTP Client and the Jersey Client so that they are integrated with Soabase's Discovery system. The URL used is <tt>//0.goodbye/goodbye</tt>. Soabase will see the &quot;0.name&quot; pattern and replace this by looking up the service in the Discovery system. If the call fails, it will get retried via a new lookup from the Discovery system.</td></tr>
<tr class="a">
<td align="center">Request Id</td>
<td align="center">In an SOA system, a single external user request will result in many internal service calls. A method for tying all of them together back to the original request is vital. Sobase adds a Request Id header which the wrapped REST Clients are aware of. In the example you see that the Hello app's REST call to the Goodbye app maintained the same Request Id.</td></tr></table></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2014&#x2013;2015
                        <a href="http://soabase.github.io/">Soabase</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
